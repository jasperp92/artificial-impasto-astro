---
/**
 * ModeSwitch.astro
 * Toggle zwischen Lese- und Präsentationsmodus
 */
---

<button id="mode-toggle" class="h-8 w-8 text-current cursor-pointer">
  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="h-8 w-8">
    <path id="mode-path" />
  </svg>
</button>

<script is:inline>
  const btn = document.getElementById("mode-toggle");
  const root = document.documentElement;
  const path = document.getElementById("mode-path");

  const ICONS = {
    presentation: "M4 4H2v16h20V4H4zm0 2h16v12H4V6zm2 2h12v2H6V8zm0 4h10v2H6v-2z", // Screen
    reading: "M3 3h8v2H3v12h8V5h2v12h8V5h-8V3h10v16H13v2h-2v-2H1V3h2zm16 7h-4v2h4v-2zm-4-3h4v2h-4V7zm2 6h-2v2h2v-2z"   // Book/Text
  };

  // Initial: nächsten Modus anzeigen
  const saved = localStorage.getItem("mode") || "reading";
  root.classList.add(`mode-${saved}`);
  path.setAttribute("d", saved === "reading" ? ICONS.presentation : ICONS.reading);

  // Toggle: Modus wechseln und Icon auf *nächsten* Modus setzen
  btn.addEventListener("click", () => {
    if (root.classList.contains("mode-reading")) {
      root.classList.remove("mode-reading");
      root.classList.add("mode-presentation");
      localStorage.setItem("mode", "presentation");
      path.setAttribute("d", ICONS.reading); // nächster: zurück zu Reading
    } else {
      root.classList.remove("mode-presentation");
      root.classList.add("mode-reading");
      localStorage.setItem("mode", "reading");
      path.setAttribute("d", ICONS.presentation); // nächster: Presentation
    }
  });
</script>