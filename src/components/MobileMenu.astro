---
import Navigation from "./Navigation.astro";
---

<div
  class="fixed top-0 right-0 
         flex justify-end items-center gap-4
         dark:bg-black bg-zinc-50 md:dark:bg-transparent
         border-b-1 md:border-none
         px-4 py-4
         z-50
         w-full md:w-fit md:flex-col md:items-end md:bg-transparent"
>
  <slot name="icons" />

  <!-- Hamburger nur auf Mobile sichtbar -->
  <button
    id="menu-toggle"
    class="h-8 w-8 flex items-center justify-center md:hidden cursor-pointer"
    aria-label="Menü öffnen/schließen"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="currentColor"
      viewBox="0 0 24 24"
      class="h-8 w-8"
    >
      <path
        id="menu-icon"
        d="M4 6h16v2H4V6zm0 5h16v2H4v-2zm16 5H4v2h16v-2z"
      />
    </svg>
  </button>
</div>

<!-- Mobile Navigation -->
<div
  id="mobile-nav"
  class="fixed top-14 right-4 bg-white dark:bg-zinc-950 p-4 hidden md:hidden z-40"
>
  <Navigation />
</div>

<script is:inline>
  (() => {
    const menuBtn = document.getElementById("menu-toggle");
    const menu = document.getElementById("mobile-nav");
    const icon = document.getElementById("menu-icon");

    if (!menuBtn || !menu || !icon) return;

    const ICONS = {
      hamburger: "M4 6h16v2H4V6zm0 5h16v2H4v-2zm16 5H4v2h16v-2z",
      close:
        "M5 5h2v2H5V5zm4 4H7V7h2v2zm2 2H9V9h2v2zm2 0h-2v2H9v2H7v2H5v2h2v-2h2v-2h2v-2h2v2h2v2h2v2h2v-2h-2v-2h-2v-2h-2v-2zm2-2v2h-2V9h2zm2-2v2h-2V7h2zm0 0V5h2v2h-2z",
    };

    let open = false;
    menuBtn.addEventListener("click", () => {
      open = !open;
      if (open) {
        menu.classList.remove("hidden");
        icon.setAttribute("d", ICONS.close);
      } else {
        menu.classList.add("hidden");
        icon.setAttribute("d", ICONS.hamburger);
      }
    });
  })();
</script>
